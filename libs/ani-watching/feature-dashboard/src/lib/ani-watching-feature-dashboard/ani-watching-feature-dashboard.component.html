<nav class="ani-watching-nav">
  <div class="nav-header">
    <h1>AniWatching</h1>
    <button
      class="basic-button refresh-button"
      (click)="refresh()"
      [disabled]="(isLoadingWatching | async) || (isLoadingPlanning | async)"
    >
      ‚ü≥
    </button>
  </div>
  <div class="nav-user-display">
    <span class="user-name">{{ (userInfo | async)?.name }}</span>
    <img
      class="user-avatar"
      [src]="(userInfo | async)?.avatar?.large"
      alt="user's avatar"
    />
  </div>
</nav>
<main
  class="ani-watching-main-content"
  [class.not-loading]="(isLoadingWatching | async) === false"
>
  <ng-container
    *ngIf="(isLoadingWatching | async) === false; else loadingSpinner"
  >
    <section class="ani-watching-section">
      <div class="section-header">
        <h2>Currently Airing</h2>
        <a
          class="airing-planned-shows"
          *ngIf="hasPlannedMediaNowAiring | async"
          routerLink="airing-planned-shows"
        >
          Some of your planned shows are airing!
        </a>
      </div>
      <zjk-ani-watching-ui-media-list-display
        [mediaList]="(airingMediaList | async) ?? []"
        (increaseEpisodeProgress)="increaseEpisodeProgress($event)"
        (decreaseEpisodeProgress)="decreaseEpisodeProgress($event)"
      ></zjk-ani-watching-ui-media-list-display>
    </section>
    <section class="ani-watching-section">
      <h2>Finished Airing</h2>
      <zjk-ani-watching-ui-media-list-display
        [mediaList]="(finishedAiringMediaList | async) ?? []"
        (increaseEpisodeProgress)="increaseEpisodeProgress($event)"
        (decreaseEpisodeProgress)="decreaseEpisodeProgress($event)"
      ></zjk-ani-watching-ui-media-list-display>
    </section>
  </ng-container>
  <ng-template #loadingSpinner>
    <div class="loading-spinner-container">
      <div class="loading-spinner"></div>
    </div>
  </ng-template>
</main>
