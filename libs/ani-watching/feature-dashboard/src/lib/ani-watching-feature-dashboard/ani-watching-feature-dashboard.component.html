<nav class="ani-watching-nav">
  <div class="nav-header">
    <h1>AniWatching</h1>
    <button
      class="basic-button refresh-button"
      (click)="refresh()"
      [disabled]="disableRefresh | async"
    >
      ‚ü≥
    </button>
  </div>
  <a
    *ngIf="userInfo | async as user"
    class="nav-user-display"
    [href]="user.siteUrl"
    target="_blank"
  >
    <span class="user-name">{{ user.name }}</span>
    <img class="user-avatar" [src]="user.avatar.large" alt="user's avatar" />
  </a>
</nav>
<main
  class="ani-watching-main-content"
  [class.not-loading]="(isLoadingWatching | async) === false"
>
  <ng-container
    *ngIf="(isLoadingWatching | async) === false; else loadingSpinner"
  >
    <section class="ani-watching-section">
      <div class="section-header">
        <h2>Currently Airing ({{ (airingMediaList | async)?.length ?? 0 }})</h2>
        <a
          class="airing-planned-shows"
          *ngIf="hasPlannedMediaNowAiring | async"
          routerLink="airing-planned-shows"
        >
          !
        </a>
      </div>
      <zjk-ani-watching-ui-media-list-display
        *ngIf="displayAiringMediaList | async; else noAiringShows"
        [mediaList]="(airingMediaList | async) ?? []"
        (increaseEpisodeProgress)="increaseEpisodeProgress($event)"
        (decreaseEpisodeProgress)="decreaseEpisodeProgress($event)"
        [disableEpisodeProgressChanges]="disableEpisodeProgressChanges"
      ></zjk-ani-watching-ui-media-list-display>
      <ng-template #noAiringShows>
        <p>No Currently Airing Shows In Your "Watching" List</p>
      </ng-template>
    </section>
    <section
      class="ani-watching-section"
      *ngIf="displayFinishedAiringMediaList | async"
    >
      <h2>
        Finished Airing ({{ (finishedAiringMediaList | async)?.length ?? 0 }})
      </h2>
      <zjk-ani-watching-ui-media-list-display
        *ngIf="
          displayFinishedAiringMediaList | async;
          else noFinishedAiringShows
        "
        [mediaList]="(finishedAiringMediaList | async) ?? []"
        (increaseEpisodeProgress)="increaseEpisodeProgress($event)"
        (decreaseEpisodeProgress)="decreaseEpisodeProgress($event)"
        [disableEpisodeProgressChanges]="disableEpisodeProgressChanges"
      ></zjk-ani-watching-ui-media-list-display>
      <ng-template #noFinishedAiringShows>
        <p>No Finished Airing Shows In Your "Watching" List</p>
      </ng-template>
    </section>
  </ng-container>
  <ng-template #loadingSpinner>
    <div class="loading-spinner-container">
      <div class="loading-spinner"></div>
    </div>
  </ng-template>
</main>
